!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ShopifyPriceUI={})}(this,function(e){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function t(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function c(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?t(Object(i),!0).forEach(function(e){var t,r;t=n,e=i[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var s=document.getElementById("price-ui").content,a=document.getElementById("price-ui__price").content,o=document.getElementById("price-ui__price-range").content,u=document.getElementById("price-ui__unit-pricing").content;function _(e,t,r){var n=o.cloneNode(!0);return n.querySelector("[data-price-min] [data-price]").innerHTML=r(e),n.querySelector("[data-price-max] [data-price]").innerHTML=r(t),n}function f(e,t){var r=a.cloneNode(!0);return r.querySelector("[data-price]").innerHTML=t(e),r}var l=function(){function t(e){r(this,t),this._el=e}return i(t,[{key:"load",value:function(e,t){var r=c({variant:!1,formatter:function(e){return e},handler:function(e){return e}},t),n=r.variant,i=r.formatter,r=r.handler;this._el.classList.add("price-ui--loading");t=r(n?this._loadVariant(n,i):this._loadProduct(e,i),e,t);this._el.innerHTML="",this._el.appendChild(t),this._el.classList.remove("price-ui--loading")}},{key:"_loadVariant",value:function(e,t){var r=s.cloneNode(!0),n=r.querySelector("[data-compare-at-price]"),i=r.querySelector("[data-price]"),a=r.querySelector("[data-unit-pricing]");e.compare_at_price&&e.compare_at_price!==e.price&&(i.classList.add("price--sale"),c=f(e.compare_at_price,t),n.appendChild(c));var c,o=f(e.price,t);return i.appendChild(o),"unit_price"in e&&(n=e,c=t,i=u.cloneNode(!0),o=i.querySelector("[data-unit-quantity]"),e=i.querySelector("[data-unit-price] [data-price]"),t=i.querySelector("[data-unit-measurement]"),o.innerHTML="".concat(n.unit_price_measurement.quantity_value).concat(n.unit_price_measurement.quantity_unit),e.innerHTML=c(n.unit_price),1===n.unit_price_measurement.reference_value?t.innerHTML=n.unit_price_measurement.reference_unit:t.innerHTML="".concat(n.unit_price_measurement.reference_value).concat(n.unit_price_measurement.reference_unit),a.appendChild(i)),r}},{key:"_loadProduct",value:function(e,t){var r=null,n=null,i=null,a=null,c=!1,o=!1;e.variants.forEach(function(e){var t=e.compare_at_price||e.price;(null===r||e.price<r)&&(r=e.price),(null===n||e.price>n)&&(n=e.price),(null===i||t<i)&&(i=t),(null===a||a<t)&&(a=t),t!==e.price&&(o=!0)});var u,c=r!==n,l=i!==a,d=s.cloneNode(!0),p=d.querySelector("[data-compare-at-price]"),e=d.querySelector("[data-price]");return o&&(e.classList.add("price--sale"),l?(u=_(i,a,t),p.appendChild(u)):(u=f(i,t),p.appendChild(u))),c?(c=_(r,n,t),e.appendChild(c)):(t=f(r,t),e.appendChild(t)),d}}]),t}(),d=document.getElementById("price-ui-badge").content,p=document.getElementById("price-ui-badge__percent-savings").content,m=document.getElementById("price-ui-badge__percent-savings-range").content,y=document.getElementById("price-ui-badge__price-savings").content,h=document.getElementById("price-ui-badge__price-savings-range").content,v=document.getElementById("price-ui-badge__on-sale").content,g=document.getElementById("price-ui-badge__sold-out").content,b=document.getElementById("price-ui-badge__in-stock").content;function q(e,t,r,n){var i=null;switch(r){case"percent":(i=p.cloneNode(!0)).querySelector("[data-price-percent]").innerHTML=t;break;case"money":(i=y.cloneNode(!0)).querySelector("[data-price]").innerHTML=n(e);break;default:i=v.cloneNode(!0)}return i}var O=function(){function t(e){r(this,t),this._el=e}return i(t,[{key:"load",value:function(e,t){var r=c({variant:!1,style:"percent",formatter:function(e){return e},handler:function(e){return e}},t),n=r.variant,i=r.style,a=r.formatter,r=r.handler;this._el.classList.add("price-ui-badge--loading");t=r(n?this._loadVariant(n,i,a):this._loadProduct(e,i,a),e,t);this._el.innerHTML="",this._el.appendChild(t),this._el.classList.remove("price-ui-badge--loading")}},{key:"_loadVariant",value:function(e,t,r){var n,i=d.cloneNode(!0),a=i.querySelector("[data-badge]");if(e.compare_at_price&&e.compare_at_price!==e.price)return e.available?(r=q(n=e.compare_at_price-e.price,Math.round(n/e.compare_at_price*100),t,r),a.appendChild(r)):(c=g.cloneNode(!0),a.appendChild(c)),i;var c=b.cloneNode(!0);return a.appendChild(c),i}},{key:"_loadProduct",value:function(e,t,r){var n=!1,i=!1,a=-1,c=0;e.variants.forEach(function(e){var t=e.compare_at_price,e=(t=!e.compare_at_price?e.price:t)-e.price;0!==a&&e!==a&&(i=!0),0<e&&(n=!0,a<e&&(c=(a=e)/t))});var c=Math.round(100*c),o=d.cloneNode(!0),u=o.querySelector("[data-badge]");if(n)return i?(e=function(e,t,r,n){var i=null;switch(r){case"percent":(i=m.cloneNode(!0)).querySelector("[data-price-percent]").innerHTML=t;break;case"money":(i=h.cloneNode(!0)).querySelector("[data-price]").innerHTML=n(e);break;default:i=v.cloneNode(!0)}return i}(a,c,t,r),u.appendChild(e)):(l=q(a,c,t,r),u.appendChild(l)),o;var l=b.cloneNode(!0);return u.appendChild(l),o}}]),t}();e.PriceUI=l,e.PriceUIBadge=O,Object.defineProperty(e,"__esModule",{value:!0})});