/*!
 * @pixelunion/rimg-shopify v2.7.1
 * (c) 2023 Pixel Union
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self).rimg=t.rimg||{},t.rimg.shopify=e())}(this,function(){"use strict";
/*!
   * @pixelunion/rimg v2.2.2
   * (c) 2022 Pixel Union
   */var o={scale:1,template:!1,templateRender:function(t,e){return t.replace("{size}","".concat(e.width,"x").concat(e.height))},max:{width:1/0,height:1/0},round:32,placeholder:!1,crop:null};function r(t,e,n,i){var r="data-rimg-".concat(e);if(!t.hasAttribute(r))return n[e]||o[e];var a=t.getAttribute(r);return i?i(a):a}function a(t){return t=t.split("x"),{width:parseInt(t[0],10),height:parseInt(t[1],10)}}function c(t){switch(t){case"top":case"center":case"bottom":case"left":case"right":return t;default:return null}}function i(t,e){var n=1<arguments.length&&void 0!==e?e:{},i=t.hasAttribute("data-rimg-template");return{el:t,isImage:i,isBackgroundImage:i&&"IMG"!==t.tagName,scale:parseInt(r(t,"scale",n)),density:window.devicePixelRatio||1,template:r(t,"template",n),templateRender:n.templateRender||o.templateRender,max:r(t,"max",n,a),round:r(t,"round",n),placeholder:r(t,"placeholder",n,a),crop:r(t,"crop",n,c)}}function g(t,e,n){var i=1<arguments.length&&void 0!==e?e:32,r=2<arguments.length&&void 0!==n?n:1/0;return 0===t?i:Math.min(Math.ceil(t/i)*i,r)}function d(t,e){var n=document.createEvent("Event");return n.initEvent(e,!0,!0),!t.dispatchEvent(n)}function h(t,e,n,i){var r,a=t.templateRender,o=n?1:function(t,e){return Math.min(Math.min(Math.max(t.max.width/e.width,1),t.density),Math.min(Math.max(t.max.height/e.height,1),t.density)).toFixed(2)}(t,e),c=n?1:t.round,d=e.width*o,h=e.height*o;if(t.crop)r={width:g(d,c,t.max.width),height:g(h,c,t.max.height)};else{var u=e.width/e.height,l=t.max.width/t.max.height;r=l<u?{width:g(d,c,t.max.width),height:g(d/l,c,t.max.height)}:{width:g(h*l,c,t.max.width),height:g(h,c,t.max.height)}}var m=a(t.template,r),s=new Image;s.onload=i,s.src=m,t.isBackgroundImage?t.el.style.backgroundImage="url('".concat(m,"')"):t.el.setAttribute("srcset","".concat(m," ").concat(o,"x"))}function u(t,e){var n=t.el;h(t,e,!1,function(t){"load"===t.type?n.setAttribute("data-rimg","loaded"):(n.setAttribute("data-rimg","error"),d(n,"rimg:error")),d(n,"rimg:load")})}function l(e){var n=e.el,t=n.getAttribute("data-rimg");if("loading"!==t&&"loaded"!==t)if(e.isBackgroundImage||0!==n.naturalWidth&&n.complete){if(!d(n,"rimg:loading")){n.setAttribute("data-rimg","loading");var i=function(t){for(var e={width:0,height:0};t&&(e.width=t.offsetWidth,e.height=t.offsetHeight,!(20<e.width&&20<e.height));)t=t.parentNode;return e}(e.el);i.width*=e.scale,i.height*=e.scale,e.placeholder?(e.isBackgroundImage||(n.setAttribute("width",Math.min(Math.floor(e.max.width/e.density),i.width)),n.setAttribute("height",Math.min(Math.floor(e.max.height/e.density),i.height))),h(e,e.placeholder,!0,function(){return u(e,i)})):u(e,i)}}else n.addEventListener("load",function t(){n.removeEventListener("load",t),l(e)})}function m(t,e){if(t){d(t,"rimg:enter");var n=i(t,e);n.isImage&&(n.isBackgroundImage||t.setAttribute("data-rimg-template-svg",t.getAttribute("srcset")),l(n))}}function s(t,e){if(t){d(t,"rimg:update");var n=i(t,e);n.isImage&&(n.isBackgroundImage||(t.setAttribute("data-rimg","lazy"),t.setAttribute("srcset",t.getAttribute("data-rimg-template-svg"))),l(n))}}function f(t){if(!t.offsetWidth||!t.offsetHeight||!t.getClientRects().length)return!1;var e=document.documentElement,n=Math.min(e.clientWidth,window.innerWidth),i=Math.min(e.clientHeight,window.innerHeight),r=t.getBoundingClientRect();return 0<=r.bottom&&0<=r.right&&r.top<=i&&r.left<=n}function p(t){return"string"==typeof t?document.querySelectorAll(t):t instanceof HTMLElement?[t]:t instanceof NodeList?t:[]}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;0<=--n&&e.item(n)!==this;);return-1<n});var n={init:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'[data-rimg="lazy"]',e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};n.selector=t,n.instance=function(t,e){var n=0<arguments.length&&void 0!==t?t:'[data-rimg="lazy"]',i=1<arguments.length&&void 0!==e?e:{},r=new IntersectionObserver(function(t){t.forEach(function(t){(t.isIntersecting||0<t.intersectionRatio)&&(r.unobserve(t.target),m(t.target,i))})},{rootMargin:"20% 0px"}),a={track:function(t){for(var e=p(0<arguments.length&&void 0!==t?t:'[data-rimg="lazy"]'),n=0;n<e.length;n++)f(e[n])?m(e[n],i):r.observe(e[n])},update:function(t){for(var e=p(0<arguments.length&&void 0!==t?t:'[data-rimg="loaded"]'),n=0;n<e.length;n++)s(e[n],i)},untrack:function(t){for(var e=p(0<arguments.length&&void 0!==t?t:"[data-rimg]"),n=0;n<e.length;n++)r.unobserve(e[n])},load:function(t){for(var e=p(0<arguments.length&&void 0!==t?t:"[data-rimg]"),n=0;n<e.length;n++)m(e[n],i)},unload:function(){r.disconnect()}};return a.track(n),a}(t,e),n.loadedWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0),document.addEventListener("shopify:section:load",function(t){return v(t.target)}),window.addEventListener("resize",function(){return function(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(.5<t/n.loadedWidth&&t/n.loadedWidth<2)return;n.loadedWidth=t,n.instance.update()}()}),document.addEventListener("shopify:section:unload",function(t){return w(t.target)}),document.addEventListener("theme:rimg:watch",function(t){return v(t.target)}),document.addEventListener("theme:rimg:unwatch",function(t){return w(t.target)}),window.jQuery&&jQuery(document).on({"theme:rimg:watch":function(t){return v(t.target)},"theme:rimg:unwatch":function(t){return w(t.target)}})},watch:v,unwatch:w,load:function(t){"function"==typeof t.matches&&t.matches(n.selector)&&n.instance.load(t);n.instance.load(t.querySelectorAll(n.selector))}};function v(t){"function"==typeof t.matches&&t.matches(n.selector)&&n.instance.track(t),n.instance.track(t.querySelectorAll(n.selector))}function w(t){n.instance.untrack(t.querySelectorAll(n.selector)),"function"==typeof t.matches&&t.matches(n.selector)&&n.instance.untrack(t)}return n});